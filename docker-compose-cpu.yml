services:
  funasr-api:
    image: quantatrisk/funasr-api:cpu-latest
    container_name: funasr-api-cpu
    ports:
      - "${NGINX_PORT:-17003}:8000"
    volumes:
      - ./temp:/app/temp
      - ./logs:/app/logs
      - ./models/modelscope:/root/.cache/modelscope
    environment:
      API_KEY: ${API_KEY:-}
      ENABLED_MODELS: ${ENABLED_MODELS:-paraformer-large}
      MODELSCOPE_PATH: /root/.cache/modelscope/hub/models
      HF_HUB_OFFLINE: ${HF_HUB_OFFLINE:-}
      HF_ENDPOINT: ${HF_ENDPOINT:-}
      NGINX_RATE_LIMIT_RPS: ${NGINX_RATE_LIMIT_RPS:-0}
      NGINX_RATE_LIMIT_BURST: ${NGINX_RATE_LIMIT_BURST:-0}
    restart: unless-stopped
